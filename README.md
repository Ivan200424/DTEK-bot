# GraphenkoBot (@DTEK-bot) üîå‚ö°

Telegram –±–æ—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –≥—Ä–∞—Ñ—ñ–∫—ñ–≤ –≤—ñ–¥–∫–ª—é—á–µ–Ω—å –µ–ª–µ–∫—Ç—Ä–æ–µ–Ω–µ—Ä–≥—ñ—ó —Ç–∞ –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É –µ–ª–µ–∫—Ç—Ä–æ–ø–æ—Å—Ç–∞—á–∞–Ω–Ω—è –≤ –£–∫—Ä–∞—ó–Ω—ñ.

## üéâ –©–æ –Ω–æ–≤–æ–≥–æ —É –≤–µ—Ä—Å—ñ—ó 2.2.0

### üî¥ –ö—Ä–∏—Ç–∏—á–Ω—ñ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è
- **–í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ –∫–Ω–æ–ø–∫—É "‚ûï –î–æ–¥–∞—Ç–∏ –∫–∞–Ω–∞–ª"** - –î–æ–¥–∞–Ω–æ –≤—ñ–¥—Å—É—Ç–Ω—ñ–π `return` –≤ –∫—ñ–Ω—Ü—ñ –æ–±—Ä–æ–±–Ω–∏–∫–∞, —â–æ –∑–∞–ø–æ–±—ñ–≥–∞—î –ø–æ–¥–∞–ª—å—à–æ–º—É –≤–∏–∫–æ–Ω–∞–Ω–Ω—é –∫–æ–¥—É
- **–í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ –≤—Å—ñ elif –±–ª–æ–∫–∏** - –ü–µ—Ä–µ–≤—ñ—Ä–µ–Ω–æ —Ç–∞ –¥–æ–¥–∞–Ω–æ –≤—ñ–¥—Å—É—Ç–Ω—ñ `return` —É –≤—Å—ñ—Ö –æ–±—Ä–æ–±–Ω–∏–∫–∞—Ö –∫–Ω–æ–ø–æ–∫ –¥–ª—è –∑–∞–ø–æ–±—ñ–≥–∞–Ω–Ω—è –ø–µ—Ä–µ–∑–∞–ø–∏—Å—É –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π

### üü¢ –ù–æ–≤—ñ —Ñ—É–Ω–∫—Ü—ñ—ó
- **üìú –Ü—Å—Ç–æ—Ä—ñ—è —Å—Ç–∞—Ç—É—Å—ñ–≤** - –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –æ—Å—Ç–∞–Ω–Ω—ñ—Ö 100 –∑–º—ñ–Ω —Å—Ç–∞—Ç—É—Å—É —Å–≤—ñ—Ç–ª–∞ –∑ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—é –ø–µ—Ä–µ–≥–ª—è–¥—É —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É "üìú –Ü—Å—Ç–æ—Ä—ñ—è"
- **üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ Uptime** - –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π —Ä–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ —Ç–∞ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è uptime (% —á–∞—Å—É –∑—ñ —Å–≤—ñ—Ç–ª–æ–º) –∑–∞ –¥–µ–Ω—å, —Ç–∏–∂–¥–µ–Ω—å —Ç–∞ –º—ñ—Å—è—Ü—å
- **üåô –ù—ñ—á–Ω–∏–π —Ä–µ–∂–∏–º** - –ú–æ–∂–ª–∏–≤—ñ—Å—Ç—å –Ω–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ –ø–µ—Ä—ñ–æ–¥ —á–∞—Å—É (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º 23:00-07:00), –∫–æ–ª–∏ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è –Ω–µ –Ω–∞–¥—Å–∏–ª–∞—Ç–∏–º—É—Ç—å—Å—è
- **üîô –ö–Ω–æ–ø–∫–∞ "–ù–∞–∑–∞–¥"** - –î–æ–¥–∞–Ω–æ –∑—Ä—É—á–Ω—É –∫–Ω–æ–ø–∫—É "üîô –ù–∞–∑–∞–¥" —É –≤—Å—ñ—Ö –ø—ñ–¥–º–µ–Ω—é –∑–∞–º—ñ—Å—Ç—å "üîô –ì–æ–ª–æ–≤–Ω–µ –º–µ–Ω—é"

### üü° –ü–æ–∫—Ä–∞—â–µ–Ω–Ω—è UX
- –û–Ω–æ–≤–ª–µ–Ω–µ –≥–æ–ª–æ–≤–Ω–µ –º–µ–Ω—é –∑ –∫–Ω–æ–ø–∫–æ—é "üåô –ù—ñ—á–Ω–∏–π —Ä–µ–∂–∏–º"
- –ü–æ–∫—Ä–∞—â–µ–Ω—ñ –ø—ñ–¥–º–µ–Ω—é –¥–ª—è –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É —Ç–∞ –≥—Ä–∞—Ñ—ñ–∫—ñ–≤
- –ë—ñ–ª—å—à –∑—Ä—É—á–Ω–∞ –Ω–∞–≤—ñ–≥–∞—Ü—ñ—è –º—ñ–∂ —Ä–æ–∑–¥—ñ–ª–∞–º–∏

## üéâ –©–æ –Ω–æ–≤–æ–≥–æ —É –≤–µ—Ä—Å—ñ—ó 2.1.0

### üî¥ –ö—Ä–∏—Ç–∏—á–Ω—ñ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è
- **Retry –ª–æ–≥—ñ–∫–∞ –¥–ª—è TCP** - 3 —Å–ø—Ä–æ–±–∏ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –∑ —ñ–Ω—Ç–µ—Ä–≤–∞–ª–æ–º 2 —Å–µ–∫—É–Ω–¥–∏ –¥–ª—è —É–Ω–∏–∫–Ω–µ–Ω–Ω—è —Ö–∏–±–Ω–∏—Ö —Å–ø–æ–≤—ñ—â–µ–Ω—å
- **Debounce —Å–ø–æ–≤—ñ—â–µ–Ω—å** - –ó–∞—Ö–∏—Å—Ç –≤—ñ–¥ —Å–ø–∞–º—É –ø—Ä–∏ –º–∏–≥–∞–Ω–Ω—ñ —Å–≤—ñ—Ç–ª–∞ (–º—ñ–Ω—ñ–º—É–º 5 —Ö–≤–∏–ª–∏–Ω –º—ñ–∂ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è–º–∏)
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ –±–µ–∫–∞–ø–∏** - –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ä–µ–∑–µ—Ä–≤–Ω–æ—ó –∫–æ–ø—ñ—ó –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó –ø–µ—Ä–µ–¥ –∫–æ–∂–Ω–∏–º –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è–º (–∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –æ—Å—Ç–∞–Ω–Ω—ñ—Ö 10 –±–µ–∫–∞–ø—ñ–≤)

### üü¢ –ù–æ–≤—ñ —Ñ—É–Ω–∫—Ü—ñ—ó
- **–ö–æ–º–∞–Ω–¥–∞ /cancel** - –ú–æ–∂–ª–∏–≤—ñ—Å—Ç—å –≤–∏–π—Ç–∏ –∑ —Ä–µ–∂–∏–º—É –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è –≤–≤–æ–¥—É –≤ –±—É–¥—å-—è–∫–∏–π –º–æ–º–µ–Ω—Ç
- **Rate Limiting** - –û–±–º–µ–∂–µ–Ω–Ω—è –¥–æ 10 –∫–æ–º–∞–Ω–¥ –Ω–∞ —Ö–≤–∏–ª–∏–Ω—É –Ω–∞ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –¥–ª—è –∑–∞—Ö–∏—Å—Ç—É –≤—ñ–¥ –ø–µ—Ä–µ–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
- **Healthcheck Endpoint** - HTTP —Å–µ—Ä–≤–µ—Ä –Ω–∞ –ø–æ—Ä—Ç—É 8080 –¥–ª—è –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É —Å—Ç–∞–Ω—É –±–æ—Ç–∞ (`/health`)

## üéâ –©–æ –Ω–æ–≤–æ–≥–æ —É –≤–µ—Ä—Å—ñ—ó 2.0.0

### üî¥ –ö—Ä–∏—Ç–∏—á–Ω—ñ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è
- **Event Loop –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–æ** - –£—Å—É–Ω—É—Ç–æ –∫–æ–Ω—Ñ–ª—ñ–∫—Ç–∏ –∑ event loop —á–µ—Ä–µ–∑ –ø—Ä–∞–≤–∏–ª—å–Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è `post_init`/`post_shutdown` —Ö—É–∫—ñ–≤
- **Thread-safe –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è** - –î–æ–¥–∞–Ω–æ `threading.Lock()` –¥–ª—è –±–µ–∑–ø–µ—á–Ω–æ—ó —Ä–æ–±–æ—Ç–∏ –∑ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ–π–Ω–∏–º–∏ —Ñ–∞–π–ª–∞–º–∏ —É –±–∞–≥–∞—Ç–æ–ø–æ—Ç–æ–∫–æ–≤–æ–º—É —Å–µ—Ä–µ–¥–æ–≤–∏—â—ñ

### üü° –ü–æ–∫—Ä–∞—â–µ–Ω–Ω—è –∫–æ–¥—É
- **–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∫–ª–∞–≤—ñ–∞—Ç—É—Ä** - –í–∏–Ω–µ—Å–µ–Ω–æ –ø–æ–≤—Ç–æ—Ä—é–≤–∞–Ω—ñ –∫–ª–∞–≤—ñ–∞—Ç—É—Ä–∏ –≤ –æ–∫—Ä–µ–º—ñ —Ñ—É–Ω–∫—Ü—ñ—ó (`build_region_keyboard()`, `build_group_keyboard()`, —Ç–æ—â–æ)
- **–í–∞–ª—ñ–¥–∞—Ü—ñ—è IP/DDNS** - –î–æ–¥–∞–Ω–æ `is_valid_ip_or_hostname()` –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –∫–æ—Ä–µ–∫—Ç–Ω–æ—Å—Ç—ñ –≤–≤–µ–¥–µ–Ω–∏—Ö –∞–¥—Ä–µ—Å
- **–ì–Ω—É—á–∫—ñ –∫–æ–Ω—Ç–∞–∫—Ç–∏** - –ö–æ–Ω—Ç–∞–∫—Ç–∏ –ø—ñ–¥—Ç—Ä–∏–º–∫–∏ —Ç–µ–ø–µ—Ä –Ω–∞–ª–∞—à—Ç–æ–≤—É—é—Ç—å—Å—è —á–µ—Ä–µ–∑ –∑–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞ (`SUPPORT_USERNAME`, `SUPPORT_EMAIL`)
- **–í–∏–¥–∞–ª–µ–Ω–æ –º–µ—Ä—Ç–≤–∏–π –∫–æ–¥** - –ü—Ä–∏–±—Ä–∞–Ω–æ –Ω–µ–≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó —Ç–∞ —ñ–º–ø–æ—Ä—Ç–∏

### üü¢ –ë–µ–∑–ø–µ–∫–∞ —Ç–∞ —è–∫—ñ—Å—Ç—å
- **SHA256 –∑–∞–º—ñ—Å—Ç—å MD5** - –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Å—É—á–∞—Å–Ω–æ–≥–æ –∞–ª–≥–æ—Ä–∏—Ç–º—É —Ö–µ—à—É–≤–∞–Ω–Ω—è –¥–ª—è –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è –∑–æ–±—Ä–∞–∂–µ–Ω—å
- **–°—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω–∏–π logging** - –ó–∞–º—ñ–Ω–∞ –≤—Å—ñ—Ö `print()` –Ω–∞ `logger` –∑ —Ä—ñ–≤–Ω—è–º–∏ –ª–æ–≥—É–≤–∞–Ω–Ω—è (INFO, WARNING, ERROR, DEBUG)
- **–í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ bare except** - –ü–æ–∫—Ä–∞—â–µ–Ω–∞ –æ–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫

## üåü –û—Å–Ω–æ–≤–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó

### üìä Graphenko - –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –≥—Ä–∞—Ñ—ñ–∫—ñ–≤
- –û–Ω–æ–≤–ª—é—î –∑–∞–∫—Ä—ñ–ø–ª–µ–Ω–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è —ñ–∑ PNG-–∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è–º –∫–æ–∂–Ω—ñ 5 —Ö–≤–∏–ª–∏–Ω
- –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ –æ–¥–∏–Ω–æ—á–Ω–∏—Ö –∑–æ–±—Ä–∞–∂–µ–Ω—å –∞–±–æ –ø–∞—Ä–∏ (—Å—å–æ–≥–æ–¥–Ω—ñ/–∑–∞–≤—Ç—Ä–∞)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –¥–æ–¥–∞–≤–∞–Ω–Ω—è timestamp —É —Ñ–æ—Ä–º–∞—Ç—ñ Europe/Kyiv
- Cache-busting –¥–ª—è –æ–±—Ö–æ–¥—É –∫–µ—à—É Telegram

### ‚ö° –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –µ–ª–µ–∫—Ç—Ä–æ–ø–æ—Å—Ç–∞—á–∞–Ω–Ω—è
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ —á–µ—Ä–µ–∑ TCP-–ø–µ—Ä–µ–≤—ñ—Ä–∫—É —Ä–æ—É—Ç–µ—Ä–∞ (IP: 93.127.118.86, –ø–æ—Ä—Ç: 443)
- –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∫–æ–∂–Ω—ñ 30 —Å–µ–∫—É–Ω–¥ –∑ retry –ª–æ–≥—ñ–∫–æ—é (3 —Å–ø—Ä–æ–±–∏)
- –ú–∏—Ç—Ç—î–≤—ñ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è –ø—Ä–æ –∑–Ω–∏–∫–Ω–µ–Ω–Ω—è —Ç–∞ –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è —Å–≤—ñ—Ç–ª–∞
- –ó–∞—Ö–∏—Å—Ç –≤—ñ–¥ —Å–ø–∞–º—É —á–µ—Ä–µ–∑ debounce (–º—ñ–Ω—ñ–º—É–º 5 —Ö–≤–∏–ª–∏–Ω –º—ñ–∂ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è–º–∏)
- –ü–æ–∫–∞–∑ —Ç—Ä–∏–≤–∞–ª–æ—Å—Ç—ñ –ø—Ä–æ—Å—Ç–æ—é/—Ä–æ–±–æ—Ç–∏
- –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ –≥—Ä–∞—Ñ—ñ–∫–æ–º –ø–ª–∞–Ω–æ–≤–∏—Ö –≤—ñ–¥–∫–ª—é—á–µ–Ω—å

## ü§ñ –ö–æ–º–∞–Ω–¥–∏ –±–æ—Ç–∞

**–û—Å–Ω–æ–≤–Ω—ñ:**
- `/start` ‚Äî –∑–∞–ø—É—Å–∫ –±–æ—Ç–∞ —Ç–∞ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –≥–æ–ª–æ–≤–Ω–æ–≥–æ –º–µ–Ω—é
- `/cancel` ‚Äî —Å–∫–∞—Å—É–≤–∞–Ω–Ω—è –ø–æ—Ç–æ—á–Ω–æ—ó –æ–ø–µ—Ä–∞—Ü—ñ—ó (–≤–∏—Ö—ñ–¥ –∑ —Ä–µ–∂–∏–º—É –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è –≤–≤–æ–¥—É)

**–ì—Ä–∞—Ñ—ñ–∫–∏ –≤—ñ–¥–∫–ª—é—á–µ–Ω—å:**
- `/graphenko_image <url.png>` ‚Äî –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ URL –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –¥–ª—è –æ–Ω–æ–≤–ª–µ–Ω—å
- `/graphenko_caption <—Ç–µ–∫—Å—Ç>` ‚Äî –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –≤–ª–∞—Å–Ω–∏–π –ø—ñ–¥–ø–∏—Å
- `/graphenko_caption -default` ‚Äî –ø–æ–≤–µ—Ä–Ω—É—Ç–∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–π –ø—ñ–¥–ø–∏—Å

**–ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –µ–ª–µ–∫—Ç—Ä–æ–ø–æ—Å—Ç–∞—á–∞–Ω–Ω—è:**
- `/monitor_on` ‚Äî —É–≤—ñ–º–∫–Ω—É—Ç–∏ –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ —Ä–æ—É—Ç–µ—Ä–∞ (–ø—ñ–Ω–≥ 93.127.118.86:443)
- `/monitor_off` ‚Äî –≤–∏–º–∫–Ω—É—Ç–∏ –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥
- `/monitor_status` ‚Äî –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Å—Ç–∞—Ç—É—Å –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É

## üìã –í–∏–º–æ–≥–∏

- **Python** 3.7 –∞–±–æ –Ω–æ–≤—ñ—à–µ
- **BOT_TOKEN** (–∑–º—ñ–Ω–Ω–∞ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞)
- –ë–æ—Ç –º–∞—î –±—É—Ç–∏ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º —ñ–∑ –ø—Ä–∞–≤–æ–º –∑–∞–∫—Ä—ñ–ø–ª–µ–Ω–Ω—è —Ç–∞ –≤–∏–¥–∞–ª–µ–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å

## üöÄ –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç

### –ö—Ä–æ–∫ 1: –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –±–æ—Ç–∞

1. –°—Ç–≤–æ—Ä—ñ—Ç—å –±–æ—Ç–∞ —á–µ—Ä–µ–∑ [@BotFather](https://t.me/BotFather):
   ```
   /newbot
   ```
2. –î–∞–π—Ç–µ —ñ–º'—è –±–æ—Ç—É —Ç–∞ –∑–±–µ—Ä–µ–∂—ñ—Ç—å –æ—Ç—Ä–∏–º–∞–Ω–∏–π **Bot Token**

### –ö—Ä–æ–∫ 2: –î–æ–¥–∞–≤–∞–Ω–Ω—è –±–æ—Ç–∞ –¥–æ –∫–∞–Ω–∞–ª—É

1. –î–æ–¥–∞–π—Ç–µ –±–æ—Ç–∞ –¥–æ –≤–∞—à–æ–≥–æ –∫–∞–Ω–∞–ª—É/—á–∞—Ç—É —è–∫ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞
2. –ù–∞–¥–∞–π—Ç–µ –±–æ—Ç—É –ø—Ä–∞–≤–∞:
   - ‚úÖ Pin messages
   - ‚úÖ Delete messages
   - ‚úÖ Post messages

### –ö—Ä–æ–∫ 3: –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è

–£ –∫–∞–Ω–∞–ª—ñ –Ω–∞–¥—ñ—à–ª—ñ—Ç—å –∫–æ–º–∞–Ω–¥—É –∑ URL –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è:

```
/graphenko_image https://raw.githubusercontent.com/Baskerville42/outage-data-ua/refs/heads/main/images/kyiv/gpv-3-2-emergency.png
```

### –ö—Ä–æ–∫ 4: –£–≤—ñ–º–∫–Ω–µ–Ω–Ω—è –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É

```
/monitor_on
```

## üîß –õ–æ–∫–∞–ª—å–Ω–∏–π –∑–∞–ø—É—Å–∫

1. –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ:
   ```bash
   pip install -r requirements.txt
   ```

2. –°—Ç–≤–æ—Ä—ñ—Ç—å `.env` —Ñ–∞–π–ª –∞–±–æ –≤—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∑–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞:
   ```bash
   export BOT_TOKEN=your_telegram_bot_token_here
   export SUPPORT_USERNAME=@YourUsername  # –æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ
   export SUPPORT_EMAIL=support@example.com  # –æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ
   ```

3. –ó–∞–ø—É—Å—Ç—ñ—Ç—å –±–æ—Ç–∞:
   ```bash
   python3 bot.py
   ```

## üåç –ó–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞

| –ó–º—ñ–Ω–Ω–∞ | –û–±–æ–≤'—è–∑–∫–æ–≤–∞ | –û–ø–∏—Å | –ó–Ω–∞—á–µ–Ω–Ω—è –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º |
|--------|-------------|------|---------------------------|
| `BOT_TOKEN` | ‚úÖ –¢–∞–∫ | –¢–æ–∫–µ–Ω Telegram –±–æ—Ç–∞ –≤—ñ–¥ @BotFather | - |
| `CHAT_ID` | ‚ùå –ù—ñ | Chat ID –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º | `-1003523279109` |
| `ADMIN_USER_ID` | ‚ùå –ù—ñ | User ID –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –¥–ª—è –¥–æ–¥–∞—Ç–∫–æ–≤–∏—Ö —Ñ—É–Ω–∫—Ü—ñ–π | `1026177113` |
| `SUPPORT_USERNAME` | ‚ùå –ù—ñ | Username –¥–ª—è —Ç–µ—Ö–Ω—ñ—á–Ω–æ—ó –ø—ñ–¥—Ç—Ä–∏–º–∫–∏ | `@Ivan200424` |
| `SUPPORT_EMAIL` | ‚ùå –ù—ñ | Email –¥–ª—è —Ç–µ—Ö–Ω—ñ—á–Ω–æ—ó –ø—ñ–¥—Ç—Ä–∏–º–∫–∏ | `support@example.com` |
| `RATE_LIMIT_COMMANDS` | ‚ùå –ù—ñ | –ú–∞–∫—Å–∏–º—É–º –∫–æ–º–∞–Ω–¥ –Ω–∞ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ | `10` |
| `RATE_LIMIT_WINDOW` | ‚ùå –ù—ñ | –ß–∞—Å–æ–≤–µ –≤—ñ–∫–Ω–æ rate limit (—Å–µ–∫—É–Ω–¥–∏) | `60` |
| `DEBOUNCE_SECONDS` | ‚ùå –ù—ñ | –ú—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π —á–∞—Å –º—ñ–∂ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è–º–∏ (—Å–µ–∫—É–Ω–¥–∏) | `300` (5 —Ö–≤–∏–ª–∏–Ω) |
| `NIGHT_MODE_START` | ‚ùå –ù—ñ | –ü–æ—á–∞—Ç–æ–∫ –Ω—ñ—á–Ω–æ–≥–æ —Ä–µ–∂–∏–º—É (–≥–æ–¥–∏–Ω–∞, 0-23) | `23` |
| `NIGHT_MODE_END` | ‚ùå –ù—ñ | –ö—ñ–Ω–µ—Ü—å –Ω—ñ—á–Ω–æ–≥–æ —Ä–µ–∂–∏–º—É (–≥–æ–¥–∏–Ω–∞, 0-23) | `7` |
| `HEALTHCHECK_PORT` | ‚ùå –ù—ñ | –ü–æ—Ä—Ç –¥–ª—è healthcheck HTTP —Å–µ—Ä–≤–µ—Ä–∞ | `8080` |

## ‚òÅÔ∏è Deployment –Ω–∞ Railway

Railway - —Ü–µ Platform-as-a-Service (PaaS) –¥–ª—è deploy Python –¥–æ–¥–∞—Ç–∫—ñ–≤ 24/7.

### –ö—Ä–æ–∫ 1: –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é

–ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ —É –≤–∞—à–æ–º—É —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó —î:
- `bot.py` ‚Äî –≥–æ–ª–æ–≤–Ω–∏–π —Ñ–∞–π–ª –±–æ—Ç–∞
- `requirements.txt` ‚Äî –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ Python
- `Procfile` ‚Äî —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó –¥–ª—è –∑–∞–ø—É—Å–∫—É
- `graphenko-chats.json` ‚Äî –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è (—Å—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ)

### –ö—Ä–æ–∫ 2: Deploy –Ω–∞ Railway

1. –ó–∞–π–¥—ñ—Ç—å –Ω–∞ [railway.app](https://railway.app)
2. –£–≤—ñ–π–¥—ñ—Ç—å —á–µ—Ä–µ–∑ GitHub
3. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å **"New Project"** ‚Üí **"Deploy from GitHub repo"**
4. –í–∏–±–µ—Ä—ñ—Ç—å –≤–∞—à —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π `DTEK-bot`
5. Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏—è–≤–∏—Ç—å Python –ø—Ä–æ–µ–∫—Ç

### –ö—Ä–æ–∫ 3: –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∑–º—ñ–Ω–Ω–∏—Ö —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞

1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ –≤–∞—à –ø—Ä–æ–µ–∫—Ç –Ω–∞ Railway
2. –ü–µ—Ä–µ–π–¥—ñ—Ç—å —É –≤–∫–ª–∞–¥–∫—É **"Variables"**
3. –î–æ–¥–∞–π—Ç–µ –∑–º—ñ–Ω–Ω—É:
   - **Name:** `BOT_TOKEN`
   - **Value:** –≤–∞—à —Ç–æ–∫–µ–Ω –≤—ñ–¥ BotFather

### –ö—Ä–æ–∫ 4: Deploy

Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Ä–æ–∑–≥–æ—Ä–Ω–µ –±–æ—Ç–∞ –ø—ñ—Å–ª—è commit —É main –≥—ñ–ª–∫—É.

–ü–µ—Ä–µ–≤–∞–≥–∏ Railway:
- ‚úÖ –ë–µ–∑–∫–æ—à—Ç–æ–≤–Ω–∏–π –ø–ª–∞–Ω (500 –≥–æ–¥–∏–Ω/–º—ñ—Å—è—Ü—å)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π deploy –ø—Ä–∏ push
- ‚úÖ –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ –∑–±–æ—è—Ö
- ‚úÖ –õ–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ

## üñ•Ô∏è Deployment –Ω–∞ VPS (Ubuntu/Debian)

–î–ª—è –ø–æ—Å—Ç—ñ–π–Ω–æ–≥–æ 24/7 –∑–∞–ø—É—Å–∫—É –Ω–∞ –≤–ª–∞—Å–Ω–æ–º—É —Å–µ—Ä–≤–µ—Ä—ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ systemd.

### –ö—Ä–æ–∫ 1: –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

```bash
# –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Å–∏—Å—Ç–µ–º–∏
sudo apt update && sudo apt upgrade -y

# –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è Python —Ç–∞ Git
sudo apt install -y python3 python3-pip git

# –ö–ª–æ–Ω—É–≤–∞–Ω–Ω—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é
cd /opt
sudo git clone https://github.com/Ivan200424/DTEK-bot.git
cd DTEK-bot

# –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π
sudo pip3 install -r requirements.txt
```

### –ö—Ä–æ–∫ 2: –°—Ç–≤–æ—Ä–µ–Ω–Ω—è systemd service

–°—Ç–≤–æ—Ä—ñ—Ç—å —Ñ–∞–π–ª `/etc/systemd/system/dtek-bot.service`:

```ini
[Unit]
Description=DTEK Telegram Bot
After=network.target

[Service]
Type=simple
User=root
WorkingDirectory=/opt/DTEK-bot
Environment="BOT_TOKEN=your_bot_token_here"
ExecStart=/usr/bin/python3 /opt/DTEK-bot/bot.py
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
```

**–í–∞–∂–ª–∏–≤–æ:** –ó–∞–º—ñ–Ω—ñ—Ç—å `your_bot_token_here` –Ω–∞ –≤–∞—à —Ä–µ–∞–ª—å–Ω–∏–π —Ç–æ–∫–µ–Ω.

### –ö—Ä–æ–∫ 3: –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤—ñ—Å—É

```bash
# –ü–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è systemd
sudo systemctl daemon-reload

# –£–≤—ñ–º–∫–Ω–µ–Ω–Ω—è –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫—É
sudo systemctl enable dtek-bot

# –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
sudo systemctl start dtek-bot

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å—É
sudo systemctl status dtek-bot
```

### –ö—Ä–æ–∫ 4: –ö–µ—Ä—É–≤–∞–Ω–Ω—è –±–æ—Ç–æ–º

```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
sudo systemctl restart dtek-bot

# –ó—É–ø–∏–Ω–∫–∞
sudo systemctl stop dtek-bot

# –ü–µ—Ä–µ–≥–ª—è–¥ –ª–æ–≥—ñ–≤
sudo journalctl -u dtek-bot -f

# –ü–µ—Ä–µ–≥–ª—è–¥ –æ—Å—Ç–∞–Ω–Ω—ñ—Ö 100 —Ä—è–¥–∫—ñ–≤ –ª–æ–≥—ñ–≤
sudo journalctl -u dtek-bot -n 100
```

### –ö—Ä–æ–∫ 5: –û–Ω–æ–≤–ª–µ–Ω–Ω—è –±–æ—Ç–∞

```bash
cd /opt/DTEK-bot
sudo git pull
sudo systemctl restart dtek-bot
```

## üè• Healthcheck

–ë–æ—Ç –Ω–∞–¥–∞—î HTTP endpoint –¥–ª—è –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É —Å—Ç–∞–Ω—É:

- **URL:** `http://localhost:8080/health` –∞–±–æ `http://localhost:8080/`
- **–ú–µ—Ç–æ–¥:** GET
- **–í—ñ–¥–ø–æ–≤—ñ–¥—å:** JSON –∑ —Å—Ç–∞—Ç—É—Å–æ–º, –≤–µ—Ä—Å—ñ—î—é —Ç–∞ timestamp

–ü—Ä–∏–∫–ª–∞–¥ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ:
```json
{
  "status": "ok",
  "version": "2.1.0",
  "timestamp": "2024-01-15T10:30:00.000Z"
}
```

–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è:
- –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É –Ω–∞ Heroku, Railway, Docker
- –ü–µ—Ä–µ–≤—ñ—Ä–∫–∏ —Å—Ç–∞–Ω—É –±–æ—Ç–∞ –∑–æ–≤–Ω—ñ—à–Ω—ñ–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏
- Health checks –≤ Kubernetes/Docker Compose

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É

```
DTEK-bot/
‚îú‚îÄ‚îÄ bot.py                   # –ì–æ–ª–æ–≤–Ω–∏–π —Ñ–∞–π–ª –±–æ—Ç–∞ (Python)
‚îú‚îÄ‚îÄ requirements.txt         # –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ Python
‚îú‚îÄ‚îÄ Procfile                 # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –¥–ª—è Railway
‚îú‚îÄ‚îÄ graphenko-chats.json     # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –∫–∞–Ω–∞–ª—ñ–≤ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ)
‚îú‚îÄ‚îÄ backups/                 # –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ –±–µ–∫–∞–ø–∏ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó (–æ—Å—Ç–∞–Ω–Ω—ñ 10)
‚îú‚îÄ‚îÄ .env.example             # –ü—Ä–∏–∫–ª–∞–¥ –∑–º—ñ–Ω–Ω–∏—Ö —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞
‚îú‚îÄ‚îÄ README.md                # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è
‚îî‚îÄ‚îÄ .gitignore               # –Ü–≥–Ω–æ—Ä–æ–≤–∞–Ω—ñ —Ñ–∞–π–ª–∏
```

## üîí –ë–µ–∑–ø–µ–∫–∞

- ‚ùå **–ù—ñ–∫–æ–ª–∏** –Ω–µ –∫–æ–º—ñ—Ç—å—Ç–µ `.env` —Ñ–∞–π–ª –∑ —Ç–æ–∫–µ–Ω–∞–º–∏
- ‚úÖ –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –∑–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞ –¥–ª—è —Å–µ–∫—Ä–µ—Ç—ñ–≤
- ‚úÖ –û–±–º–µ–∂—Ç–µ –¥–æ—Å—Ç—É–ø –¥–æ `graphenko-chats.json`
- ‚úÖ –†–µ–≥—É–ª—è—Ä–Ω–æ –æ–Ω–æ–≤–ª—é–π—Ç–µ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
- ‚úÖ Rate limiting –∑–∞—Ö–∏—â–∞—î –≤—ñ–¥ —Å–ø–∞–º—É (10 –∫–æ–º–∞–Ω–¥/—Ö–≤–∏–ª–∏–Ω—É)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ –±–µ–∫–∞–ø–∏ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó (–æ—Å—Ç–∞–Ω–Ω—ñ 10 –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è)

## üêõ Troubleshooting

### –ë–æ—Ç –Ω–µ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –Ω–∞ –∫–æ–º–∞–Ω–¥–∏

1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ –±–æ—Ç –∑–∞–ø—É—â–µ–Ω–∏–π:
   ```bash
   sudo systemctl status dtek-bot
   ```

2. –ü–µ—Ä–µ–≥–ª—è–Ω—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –ø–æ–º–∏–ª–∫–∏:
   ```bash
   sudo journalctl -u dtek-bot -n 50
   ```

3. –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ `BOT_TOKEN` –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ

### –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –Ω–µ –ø—Ä–∞—Ü—é—î

1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ —É–≤—ñ–º–∫–Ω–µ–Ω–æ –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥:
   ```
   /monitor_status
   ```

2. –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ —Ö–æ—Å—Ç –¥–æ—Å—Ç—É–ø–Ω–∏–π:
   ```bash
   nc -zv 93.127.118.86 443
   ```

### Graphenko –Ω–µ –æ–Ω–æ–≤–ª—é—î—Ç—å—Å—è

1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ `image_url`:
   ```
   /graphenko_image <url>
   ```

2. –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ URL –¥–æ—Å—Ç—É–ø–Ω–∏–π —Ç–∞ —î PNG –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è–º

## ‚ö°Ô∏è –ú—ñ–≥—Ä–∞—Ü—ñ—è –∑ GitHub Actions

–Ø–∫—â–æ –≤–∏ –º—ñ–≥—Ä—É—î—Ç–µ –∑ –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ—ó –≤–µ—Ä—Å—ñ—ó –Ω–∞ GitHub Actions:

1. ‚úÖ –í—Å—ñ –¥–∞–Ω—ñ –∑ `graphenko-chats.json` –∑–±–µ—Ä–µ–∂–µ–Ω—ñ
2. ‚úÖ –û–±–∏–¥–≤—ñ —Ñ—É–Ω–∫—Ü—ñ—ó (Graphenko + –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥) –ø—Ä–∞—Ü—é—é—Ç—å –≤ –æ–¥–Ω–æ–º—É –±–æ—Ç—ñ
3. ‚úÖ –ö–æ–º–∞–Ω–¥–∏ –∑–∞–ª–∏—à–∏–ª–∏—Å—è –Ω–µ–∑–º—ñ–Ω–Ω–∏–º–∏
4. ‚úÖ GitHub Actions workflows –±—ñ–ª—å—à–µ –Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω—ñ

**–ó–º—ñ–Ω–∏:**
- ‚ùå –í–∏–¥–∞–ª–µ–Ω–æ `.github/workflows/`
- ‚ùå –í–∏–¥–∞–ª–µ–Ω–æ `index.mjs`, `monitor-worker.mjs`, `src/`
- ‚ùå –í–∏–¥–∞–ª–µ–Ω–æ `package.json`, `package-lock.json`
- ‚úÖ –î–æ–¥–∞–Ω–æ `bot.py` (Python standalone)
- ‚úÖ –î–æ–¥–∞–Ω–æ `requirements.txt`, `Procfile`

## üìä –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ —Ç–∞ –ª–æ–≥–∏

### Railway
–õ–æ–≥–∏ –¥–æ—Å—Ç—É–ø–Ω—ñ –≤ dashboard Railway —É —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ.

### VPS (systemd)
```bash
# –†–µ–∞–ª—å–Ω–∏–π —á–∞—Å
sudo journalctl -u dtek-bot -f

# –û—Å—Ç–∞–Ω–Ω—ñ N —Ä—è–¥–∫—ñ–≤
sudo journalctl -u dtek-bot -n 100

# –ó –ø–µ–≤–Ω–æ—ó –¥–∞—Ç–∏
sudo journalctl -u dtek-bot --since "2024-01-01"
```

## ü§ù Contribution

Pull requests –≤—ñ—Ç–∞—é—Ç—å—Å—è! –î–ª—è –≤–µ–ª–∏–∫–∏—Ö –∑–º—ñ–Ω —Å–ø–æ—á–∞—Ç–∫—É –≤—ñ–¥–∫—Ä–∏–π—Ç–µ issue.

## üìù –õ—ñ—Ü–µ–Ω–∑—ñ—è

MIT

---

**–°–ª–∞–≤–∞ –£–∫—Ä–∞—ó–Ω—ñ! üá∫üá¶**
